<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #f8f9fa; padding: 20px; }
    .card { max-width: 600px; margin: auto; padding: 20px; border-radius: 15px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div id="login-box" class="card shadow">
    <h3>ERP Riscos - Login</h3>
    <input type="text" id="user" class="form-control mb-2" placeholder="Usuário">
    <input type="password" id="pass" class="form-control mb-3" placeholder="Senha">
    <button onclick="login()" class="btn btn-primary w-100">Entrar</button>
  </div>

  <div id="main-app" class="hidden">
    <div class="d-flex justify-content-between mb-4">
      <h4 id="user-title">Painel de Riscos</h4>
      <button onclick="location.reload()" class="btn btn-outline-danger btn-sm">Sair</button>
    </div>
    <div id="content"></div>
  </div>

  <script>
    function login() {
      const u = document.getElementById('user').value;
      const p = document.getElementById('pass').value;
      google.script.run.withSuccessHandler(res => {
        if(res.status === "success") {
          document.getElementById('login-box').classList.add('hidden');
          document.getElementById('main-app').classList.remove('hidden');
          document.getElementById('user-title').innerText = "Olá, " + res.nome;
        } else { alert(res.message); }
      }).realizarLogin(u, p);
    }
  </script>
</body>
</html>
